<!-- Add Equipment Modal -->
<div class="modal fade" id="addEquipmentModal" tabindex="-1" role="dialog" aria-labelledby="addEquipmentModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addEquipmentModalLabel">Add Equipment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="addEquipmentForm" method="POST" action="{{ url_for('equipment.add_equipment') }}">
        <div class="modal-body">
          <div class="form-group">
            <label for="addEquipmentSN">Serial Number</label>
            <input type="text" class="form-control" id="addEquipmentSN" name="sn" required>
          </div>
          <div class="form-group">
            <label for="addEquipmentModelName">Model Name</label>
            <input type="text" class="form-control" id="addEquipmentModelName" name="model_name" required>
          </div>
          <div class="form-group">
            <label for="addEquipmentType">Equipment Type</label>
            <input type="text" class="form-control" id="addEquipmentType" name="equipment_type" required>
          </div>
          <div class="form-group">
            <label for="addEquipmentManufacturer">Manufacturer</label>
            <input type="text" class="form-control" id="addEquipmentManufacturer" name="manufacturer" required>
          </div>
          <div class="form-group">
            <label for="addEquipmentLocname">Location Name</label>
            <input type="text" class="form-control" id="addEquipmentLocname" name="locname" required>
          </div>
          <div class="form-group">
            <label for="addEquipmentBuilding">Building</label>
            <input type="text" class="form-control" id="addEquipmentBuilding" name="building" required>
          </div>
          <div class="form-group">
            <label for="addEquipmentNote">Note</label>
            <textarea class="form-control" id="addEquipmentNote" name="note" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label for="addEquipmentCreatedBy">Created By</label>
            <input type="text" class="form-control" id="addEquipmentCreatedBy" name="created_by" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Add Equipment</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Edit Equipment Modal -->
<div class="modal fade" id="editEquipmentModal" tabindex="-1" role="dialog" aria-labelledby="editEquipmentModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editEquipmentModalLabel">Edit Equipment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="editEquipmentForm" method="POST">
        <div class="modal-body">
          <div class="form-group">
            <label for="editEquipmentSN">Serial Number</label>
            <input type="text" class="form-control" id="editEquipmentSN" name="sn" required>
          </div>
          <div class="form-group">
            <label for="editEquipmentModelName">Model Name</label>
            <input type="text" class="form-control" id="editEquipmentModelName" name="model_name" required>
          </div>
          <div class="form-group">
            <label for="editEquipmentType">Equipment Type</label>
            <input type="text" class="form-control" id="editEquipmentType" name="equipment_type" required>
          </div>
          <div class="form-group">
            <label for="editEquipmentManufacturer">Manufacturer</label>
            <input type="text" class="form-control" id="editEquipmentManufacturer" name="manufacturer" required>
          </div>
          <div class="form-group">
            <label for="editEquipmentLocname">Location Name</label>
            <input type="text" class="form-control" id="editEquipmentLocname" name="locname" required>
          </div>
          <div class="form-group">
            <label for="editEquipmentBuilding">Building</label>
            <input type="text" class="form-control" id="editEquipmentBuilding" name="building" required>
          </div>
          <div class="form-group">
            <label for="editEquipmentNote">Note</label>
            <textarea class="form-control" id="editEquipmentNote" name="note" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label for="editEquipmentCreatedBy">Created By</label>
            <input type="text" class="form-control" id="editEquipmentCreatedBy" name="created_by" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Delete Equipment Modal -->
<div class="modal fade" id="deleteEquipmentModal" tabindex="-1" role="dialog" aria-labelledby="deleteEquipmentModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteEquipmentModalLabel">Delete Equipment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="deleteEquipmentForm" method="POST">
        <div class="modal-body">
          <p>Are you sure you want to delete this equipment?</p>
          <input type="hidden" id="deleteEquipmentId" name="id">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-danger">Delete</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  // Populate the edit modal with the current equipment data
  $('#editEquipmentModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget);
    var id = button.data('id');
    var sn = button.data('sn');
    var model_name = button.data('model_name');
    var equipment_type = button.data('equipment_type');
    var manufacturer = button.data('manufacturer');
    var locname = button.data('locname');
    var building = button.data('building');
    var note = button.data('note');
    var created_by = button.data('created_by');

    var modal = $(this);
    modal.find('#editEquipmentForm').attr('action', '/equipment/' + id + '/edit');
    modal.find('#editEquipmentSN').val(sn);
    modal.find('#editEquipmentModelName').val(model_name);
    modal.find('#editEquipmentType').val(equipment_type);
    modal.find('#editEquipmentManufacturer').val(manufacturer);
    modal.find('#editEquipmentLocname').val(locname);
    modal.find('#editEquipmentBuilding').val(building);
    modal.find('#editEquipmentNote').val(note);
    modal.find('#editEquipmentCreatedBy').val(created_by);
  });

  // Populate the delete modal with the current equipment id
  $('#deleteEquipmentModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget);
    var id = button.data('id');

    var modal = $(this);
    modal.find('#deleteEquipmentForm').attr('action', '/equipment/' + id + '/delete');
    modal.find('#deleteEquipmentId').val(id);
  });
</script>

<!-- Edit and Delete Modals -->
{% for equipment in equipments %}
<!-- Edit Modal for {{ equipment.sn }} -->
<!-- Delete Modal for {{ equipment.sn }} -->
{% endfor %}